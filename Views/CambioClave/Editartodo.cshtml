@model Inmobiliaria.Models.CambioClave

<h1>@ViewBag.Title</h1>

<h4>Usuario</h4>
<hr />
@if(TempData.ContainsKey("exito"))
{
    <div class="alert alert-success">
        @TempData["exito"]
    </div>
}
@if (TempData["error"] != null)
{
    <div class="alert alert-danger">
        @TempData["error"]
    </div>
}
<div class="container d-flex flex-row ">
	
	<div class="row col-4 p-2 border m-1">
		<form asp-action="EditarNombres">
			<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			<div class="form-group">
				<label asp-for="Id" class="control-label"></label>
				<input asp-for="Id" readonly class="form-control" />
				<span asp-validation-for="Id" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="Email" class="control-label"></label>
				<input asp-for="Email" class="form-control" />
				<span asp-validation-for="Email" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="Nombre" class="control-label"></label>
				<input asp-for="Nombre" class="form-control" />
				<span asp-validation-for="Nombre" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="Apellido" class="control-label"></label>
				<input asp-for="Apellido" class="form-control" />
				<span asp-validation-for="Apellido" class="text-danger"></span>
			</div>
			<button asp-action="EditarNombres" asp-route-CambioClave="@Model" class="btn btn-primary mt-2 col-12">Guardar </button>
		
		</form>
	</div>

	<!--div class="row col-4 p2 border m-1">
		<form asp-action="Create" enctype="multipart/form-data">
			<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			
			<div class="form-group">
				<label asp-for="AvatarFile" class="control-label"></label>
				<input type="file" name="AvatarFile" />
				<span asp-validation-for="AvatarFile" class="text-danger"></span>
			</div>
			
			<div class="form-group">
				<input type="submit" value="Create" class="btn btn-primary" />
			</div>
		</form>
	</div-->

	<div class="row col-4 p-2 border m-1">
	
		<form asp-action="CambioClave">
			<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			<div class="form-group ">
				<label asp-for="Id" class="control-label"></label>
				<input asp-for="Id" readonly class="form-control" />
				<span asp-validation-for="Id" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="nuevaClave" class="control-label"></label>
				<input type="password" asp-for="nuevaClave"  class="form-control"/>
				<!--span asp-validation-for="nuevaClave" class="text-danger"></span-->
			</div>
			<div class="form-group">
				<label asp-for="confirmarClave" class="control-label"></label>
				<input type="password" asp-for="confirmarClave"  class="form-control"/>
				<!--span asp-validation-for="confirmarClave" class="text-danger"></span-->
			</div>
			<button asp-action="CambioClave" asp-route-CambioClave="@Model" class="btn btn-danger mt-2 col-12 alig-self-end">Cambiar Contraseña</button>
		</form>
	</div>

 	<div class="row col-4 p2 border m-1">
		<form asp-action="CambiarImagen" enctype="multipart/form-data">
			<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			<div class="form-group ">
				<label asp-for="Id" class="control-label"></label>
				<input asp-for="Id" readonly class="form-control" />
				<span asp-validation-for="Id" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="Avatar" class="control-label"></label><br />
				@if (Model.Avatar != "")
				{
					<img width="100" src="@Model.Avatar" />
					
				}
				else
				{
					<p>Sin avatar</p>
				}
			</div>
			
			<div class="form-group mt-2">
				<label asp-for="AvatarFile" class="control-label"></label>
				<input type="file" name="AvatarFile" />
				<span asp-validation-for="AvatarFile" class="text-danger"></span>
			</div>
			
			<div class="form-group mt-3">
				<input type="submit" value="CambiarImagen" class="btn btn-primary" />
			</div>
		</form>
	</div>

    </div>
<script>
	var mensaje= '@(ViewData["mensaje"] ?? "")';
	if(mensaje!=""){
		alert(mensaje)

		
	}
//@(ViewData["mensaje"])


/*
<script>
    var mensaje = '@(ViewData["mensaje"] ?? "")'; // Usar '' para renderizar el valor C#
    if (mensaje !== '') {
        alert(mensaje);
        // Realizar una llamada AJAX para borrar el mensaje en el servidor
        $.ajax({
            url: '/Controlador/BorrarMensaje', // Reemplaza '/Controlador/BorrarMensaje' con la URL de tu acción en el controlador
            type: 'POST', // O el método HTTP que necesites
            success: function () {
                // La llamada AJAX se completó con éxito, puedes realizar más acciones si es necesario
            },
            error: function () {
                // Manejar errores si es necesario
            }
        });
    }
 script>
En tu controlador, crea una acción que borre el mensaje de ViewData:
csharp
Copy code
public IActionResult BorrarMensaje()
{
    // Eliminar o actualizar el mensaje en ViewData según tus necesidades
    ViewData["mensaje"] = null; // Esto elimina el mensaje
    
    // Puedes redirigir a una vista o realizar otras acciones aquí
    return Json(new { success = true }); // Otra opción es devolver JSON si lo prefieres
}
Asegúrate de que la URL en la llamada AJAX (url: '/Controlador/BorrarMensaje') coincida con la URL de tu acción en el controlador.

Con esto, después de mostrar el alert, se realizará una llamada AJAX para borrar el mensaje en el servidor. Puedes personalizar la acción BorrarMensaje en el controlador para realizar cualquier otro tipo de limpieza o actualización que necesites en tu aplicación.






*/
</script>
